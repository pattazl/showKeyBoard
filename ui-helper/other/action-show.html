<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIV Animation</title>
    <style>
        .color-changing-div {
            border: 1px blue solid;
            animation: colorShift 18s infinite linear;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes colorShift {
            0% {
                background-color: #00B7EB;
            }

            16.67% {
                background-color: #C8D7E3;
            }

            33.33% {
                background-color: #7AC142;
            }

            50% {
                background-color: #003366;
            }

            66.67% {
                background-color: #0078D7;
            }

            83.33% {
                background-color: #8E44AD;
            }

            100% {
                background-color: #00B7EB;
            }
        }

        .allContain {
            width: 800px;
            border: blue 1px solid;
            margin: 0px;
            padding: 2px;
            text-align: center;
            border: 1px solid #ccc;
            position: relative;
        }

        .container {
            position: absolute;
        }

        .container2 {
            position: relative;
            width: 800px;
            height: 200px;
            border: 1px solid #ccc;
            overflow: hidden;
        }

        .new-div {
            position: absolute;
            background-color: rgba(0, 123, 255, 0.3);
            color: white;
            text-align: center;
            line-height: 30px;
            opacity: 1;
        }
    </style>
</head>

<body>
    <div class="container2" id="container"></div>

    <div style="background-color: aliceblue;border: 1px red solid;display: inline-block;" id="bgDiv">
        ‰ΩçÁΩÆÊòæÁ§∫ <div style="float: right;">ÂÖ≥Èó≠</div>
        <div class="allContain" id="mainContain">
        </div>
    </div>

</body>
<script>
    // { "Left": -2880, "Top": 0, "Right": -1440, "Bottom": 900 } 
    // { "Left": -2880, "Top": 0, "Right": -960, "Bottom": 1200 }
    let monitorInfo = [{ "Left": -2880, "Top": 0, "Right": -1440, "Bottom": 900 }, { "Left": 0, "Top": 0, "Right": 2560, "Bottom": 1440 }]
    let newMonitor = [] // ËΩ¨Êç¢ÂêéÁöÑÁõëËßÜÂô®‰ø°ÊÅØ
    // ÂàõÂª∫‰∏Ä‰∏™Á™óÂè£ÊòæÁ§∫ Div
    let winOpt = {
        guiWidth: 240,
        guiHeigth: 0,
        guiBgcolor: "8611AA",
        guiBgTrans: 0,
        guiTrans: 1,
        guiOpacity: 38,
        guiTextFont: "Verdana",
        guiTextSize: 26,
        guiTextWeight: "bold",
        guiTextColor: "FFEE00",
        guiLife: 7000,
        guiInterval: 1000,
        guiPos: "BR",
        guiPosXY: "Y",
        guiPosOffsetX: 0,
        guiPosOffsetY: -50,
        guiDpiscale: 0,
        guiMonitorNum: 0, // Á¨¨Âá†‰∏™ÊòæÁ§∫Âô®
        guiMargin: 5,
        guiEdge: 1,
        txtSplit: " ",
        ctrlX: 10,
        ctrlY: 5,
        ctrlTextSize: 19,
        activeAppShowX: 600,
        activeAppShowY: 0,
        // Â§ßÂºÄÂÖ≥
        needShowKey: 1, // ÊòØÂê¶ÊòæÁ§∫ÊåâÈîÆ
        activeAppShow: 0, // ÊòØÂê¶ÊòæÁ§∫ËøõÁ®ãÂêç
        ctrlState: 1,  // ÊòØÂê¶ÊòæÁ§∫ÊéßÂà∂ÈîÆ
    }
    let globalScale = 1;
    function createAnimatedDivs() {
        let textArr = ['k e y', 'p r e s√ó2', 't e s t', 'üñ±Ô∏è√ó3 ^+v', '‚áß+c ‚ê£√ó12', '‚äû+d', 'Caps', 'Del√ó4'];
        textArr = textArr.map(x => {
            return x.replace(/ /g, winOpt.txtSplit);
        })
        // ÂàõÂª∫ÂâçÂÖàÊ∏ÖÁ©∫DIV
        container.innerHTML = ''
        textArr.forEach((text, i) => {
            // Èó¥ÈöîÂ§öÂ∞ëÁßí‰∫ßÁîüÊñ∞ÁöÑ
            setTimeout(() => {
                createNewTxt(text)
            }, winOpt.guiInterval * i);
        })
    }
    function createNewTxt(text, scale) {
        const newDiv = document.createElement('div');
        newDiv.classList.add('new-div');
        // ÈúÄË¶ÅÊ†πÊçÆÂèÇÊï∞ÂàõÂª∫ guiWidth: 240, guiHeigth: 0, guiBgcolor: "8611AA", guiBgTrans: 0, guiTrans: 1, guiOpacity: 38, guiTextFont: "Verdana", guiTextSize: 26, guiTextWeight: "bold", guiTextColor: "FFEE00",
        newDiv.textContent = text;
        newDiv.style.width = winOpt.guiWidth * scale + 'px';
        if (winOpt.guiHeigth != 0) {
            newDiv.style.height = winOpt.guiHeigth * scale + 'px';
        }
        newDiv.style.backgroundColor = '#' + winOpt.guiBgcolor
        newDiv.style.opacity = winOpt.guiOpacity / 100
        newDiv.style.fontSize = winOpt.guiTextSize * scale + 'px';
        newDiv.style.fontFamily = winOpt.guiTextFont
        newDiv.style.lineHeight = winOpt.guiTextSize * scale + 'px';
        newDiv.style.fontWeight = winOpt.guiTextWeight
        newDiv.style.color = '#' + winOpt.guiTextColor

        // ÊñπÂêëÊ†πÊçÆ guiPos Âíå guiPosXY ÂÜ≥ÂÆö guiPosOffsetX: 0, guiPosOffsetY: -50,
        // ÈªòËÆ§ TL
        let guiX = winOpt.guiPosOffsetX
        let guiY = winOpt.guiPosOffsetY
        let editHeight = getComputedStyle(newDiv).height
        monitorIndex = winOpt.guiMonitorNum
        if (monitorIndex > newMonitor.length || monitorIndex == 0) {
            monitorIndex = 1
        }
        let width = newMonitor[monitorIndex].Width
        let height = newMonitor[monitorIndex].Height
        // Ê≠§Â§ÑÂùêÊ†áÈúÄË¶ÅËΩ¨Êç¢‰∏∫‰∏çÂêåÂ±èÂπïÁöÑÔºåÊØè‰∏™Â±èÂπïÈªòËÆ§Ëµ∑ÂßãÁÇπ‰∏∫ 0 0
        switch (winOpt.guiPos) {
            case 'TR':
                guiX = guiX + width - winOpt.guiWidth
                break;
            case 'BL':
                guiY = guiY + height - editHeight
                break;
            case 'BR':
                guiX = guiX + width - winOpt.guiWidth
                guiY = guiY + height - editHeight
                break;
        }
        newDiv.style.top = guiX * scale + 'px'
        newDiv.style.left = guiY * scale + 'px'
        objContainer.appendChild(newDiv);
        const existingDivs = []; //objContainer.querySelectorAll('.new-div');
        existingDivs.forEach(div => {
            if (div !== newDiv) {
                let prePos = 0, selfSize = 0, offset = winOpt.guiMargin;
                switch (direction) {
                    case 'up':
                        prePos = parseInt(getComputedStyle(div).bottom) || 0;
                        selfSize = parseInt(getComputedStyle(div).height)
                        div.style.bottom = (prePos + offset + selfSize) + 'px';
                        break;
                    case 'down':
                        prePos = parseInt(getComputedStyle(div).top) || 0;
                        selfSize = parseInt(getComputedStyle(div).height)
                        div.style.top = (prePos + offset + selfSize) + 'px';
                        break;
                    case 'left':
                        prePos = parseInt(getComputedStyle(div).right) || 0;
                        selfSize = parseInt(getComputedStyle(div).width)
                        div.style.right = (prePos + offset + selfSize) + 'px';
                        break;
                    case 'right':
                        prePos = parseInt(getComputedStyle(div).left) || 0;
                        selfSize = parseInt(getComputedStyle(div).width)
                        div.style.left = (prePos + offset + selfSize) + 'px';
                        break;
                }
            }
        });
        // Ë∂ÖÊó∂ÂêéÊ∏ÖÁêÜÊéâ
        setTimeout(() => {
            //newDiv.classList.add('hidden');
            objContainer.removeChild(newDiv);
        }, winOpt.guiLife);
    }

    // Ë¶ÅÂèñÊúÄÂ§ßËåÉÂõ¥ÔºåËΩ¨Êç¢ monitorInfo ÁöÑË¥üÊï∞‰ΩçÁΩÆ
    function getOffset(demoWidth) {
        let maxInfo = { "Left": 0, "Top": 0, "Right": 0, "Bottom": 0 }  // ÊúÄÂ∞èÁöÑ Left Top ÔºåÊúÄÂ§ßÁöÑ Right Bottom
        monitorInfo.forEach(x => {
            maxInfo.Left = Math.min(x.Left, maxInfo.Left)
            maxInfo.Top = Math.min(x.Top, maxInfo.Top)
            maxInfo.Right = Math.max(x.Right, maxInfo.Right)
            maxInfo.Bottom = Math.max(x.Bottom, maxInfo.Bottom)
        })
        // ÂùêÊ†áÂÖ®ÈÉ®ÂèòÊàêÊ≠£Êï∞
        let offsetX = 0, offsetY = 0
        if (maxInfo.Left < 0) {
            offsetX = - maxInfo.Left
        }
        if (maxInfo.Right < 0) {
            offsetY = - maxInfo.Right
        }
        let scale = demoWidth / (maxInfo.Right - maxInfo.Left)
        console.log('scale', maxInfo.Bottom - maxInfo.Top)
        let height = parseInt(scale * (maxInfo.Bottom - maxInfo.Top))
        // ÈúÄË¶ÅÊ†πÊçÆÊúÄÂ§ßÊúÄÂ∞èËÆ°ÁÆóÁº©ÊîæÊØîÔºåÊ†πÊçÆÂÆΩÂ∫¶ËÆ°ÁÆóÁº©ÊîæÊØîÔºådemoWidth
        return { offsetX, offsetY, scale, height }
    }
    // getNewInfo()
    function initContain() {
        // 800ÁöÑÂÆΩÂ∫¶
        let { offsetX, offsetY, scale, height } = getOffset(800)
        // ËÆ°ÁÆóÂÅèÁßªÔºå‰øÆÊîπ‰∏∫ Width Êàñ Height
        newMonitor = monitorInfo.map(x => {
            return { "Left": x.Left + offsetX, "Top": x.Top + offsetY, "Width": x.Right - x.Left, "Height": x.Bottom - x.Top }
        })
        console.log('newMonitor:', JSON.stringify(newMonitor))
        let main = document.getElementById("mainContain")
        main.style.height = height + 'px'
        let arrHTML = newMonitor.map((x, i) => {
            let screenHTML = `<div style="top:${x.Top * scale}px;left:${x.Left * scale}px;" class="container">
            <div id="monitorId${i + 1}" style="width:${x.Width * scale}px;height:${x.Height * scale}px;" class="color-changing-div">
                <button onclick="fullScreen(${i + 1})">ÂÖ®Â±è${i + 1}</button>
            </div>
        </div>`
            return screenHTML
        })
        main.innerHTML = arrHTML.join('')
        globalScale = scale
    }
    // ÂÖ®Â±è‰ª£Á†Å
    function fullScreen(id) {
        const myDiv = document.getElementById('monitorId' + id);
        toggleFullscreen(myDiv)
    }

    function toggleFullscreen(myDiv) {
        if (document.fullscreenElement) {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
        } else {
            if (myDiv.requestFullscreen) {
                myDiv.requestFullscreen();
            } else if (myDiv.webkitRequestFullscreen) {
                myDiv.webkitRequestFullscreen();
            } else if (myDiv.mozRequestFullScreen) {
                myDiv.mozRequestFullScreen();
            } else if (myDiv.msRequestFullscreen) {
                myDiv.msRequestFullscreen();
            }

        }
    }
    document.addEventListener('fullscreenchange', function () {
        console.log(document.fullscreenElement)
    });

    document.addEventListener('fullscreenerror', function () {
        console.error('ÂÖ®Â±èÊìç‰ΩúÂá∫Èîô');
    });
    // ÂàùÂßãÂåñÂÆπÂô®
    initContain()
    let objContainer = document.getElementById('container'); // ÂÆπÂô®ÊòæÁ§∫
    // Ë∞ÉÁî®ÂáΩÊï∞Ôºå‰º†ÂÖ•ÂÆπÂô® ID ÂíåÁßªÂä®ÊñπÂêë
    setInterval(() => { if (objContainer.innerHTML.trim() == '') { createAnimatedDivs(); } }, 1000)
</script>

</html>